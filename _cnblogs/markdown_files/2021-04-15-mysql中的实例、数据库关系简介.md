---
layout: post
title:  "mysql中的实例、数据库关系简介"
date:   2021-04-15 16:51:00
categories: 
tags:  zengzzzzz-blog
---

* content
{:toc}

  
&nbsp;  
  
MySQL是单进程多线程（而Oracle等是多进程），也就是说MySQL实例在系 统上表现就是一个服务进程，即进程（通过多种方法可以创建多实例，再安装一个端口号不同的mysql，或者通过workbench来新建一个端口号不同的 服务器实例等），该架构类似于SQL Server和Windows版本的Oracle  
MySQL实例是线程和内存组成，实例才是真正用于操作数据库文件的（MySQL数据库是由一些列物理文件组成，类似于frm、MYD、MYI、ibd结尾的文件）  
一般情况下一个实例操作一个或多个数据库（Oracle一个实例对应一个数据库）；集群情况下多个实例操作一个或多个数据库  
mysql中建立一个会话，不是和具体的数据库相连接，而是跟某个instance建立会话（每个会话可以使用不同的用户身份），而一个实例可以操作多个数据库，故一个会话（在操作系统概念里，会话即是线程）可以操作一个实例上的多个数据库  
  
connection和session的定义和区别：  
1.连接(connection)是一个物理的概念，它指的是一个通过网络建立的客户端和专有服务器(Dedicated Server）或调度器(Shared Server)的一个网络连接。2.会话(session)是一个逻辑的概念，它是存在于实例中。  
注：创建一个连接(connection)实际上是在某个实例（instance，或者说是进程）中创建一个或多个线程。  
两者关系：  
1、一个连接可以拥有多个会话也可以没有会话（实际上，一条连接上的各个会话可以使用不同的用户身份），同一个连接上的不同会话之间不会相互影响。  
2、 两个会话之间的影响，体现在锁和锁存，即对相同资源的操作（对象定义或数据块）或请求（CPU/内存），它们的处理一般是按队列来处理的，前面的没有处理好，后面的就要等待。如果以打电话来比喻：connect就好比你接通对方，这时，connect就建立了，有没有通话，不管。双方进行通话，则 session建立了，如果换人，则新的session建立，原session结束，类似的，可以在同一个connect上进行多个会话。最后挂机，connect结束。  
1、会话可以创建多个事务比如：使用客端连接数据库，这样你就可以执行很多个事务了2、一个事务只能由一个会话产生在数据库里的事务，如果在执行的SQL都是由会话发起的，哪怕是自动执行的JOB也是由系统会话发起的3、一个事务可能会产生一个或多个线程比如RMAN备份，是可以创建多个线程可加快备份速度4、一个线程在同一时间内只能执行一个事务而一个线程，在没结束当前事务是无法释放资源来执行第二个事务  
&nbsp;
